"use strict";(self.webpackChunkcompaneros_de_viaje_app=self.webpackChunkcompaneros_de_viaje_app||[]).push([[729],{729:(j,y,s)=>{s.r(y),s.d(y,{AuthModule:()=>Y});var p=s(6895),C=s(529),l=s(5450),e=s(8256);let U=(()=>{class t{constructor(r){this.router=r}onClick(){this.router.navigateByUrl("/cdv/home")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["auth-header"]],decls:2,vars:0,consts:[[1,"bg-white","py-3","px-3","sm:px-6","xl:px-8","shadow-1","flex","align-items-center","justify-content-center","relative","cursor-pointer",3,"click"],["src","./assets/svg/log.svg","alt","Logo",1,"h-4rem"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onClick()}),e._UZ(1,"img",1),e.qZA())}}),t})(),q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"content"]],template:function(r,i){1&r&&(e._UZ(0,"auth-header"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA())},dependencies:[l.lC,U],styles:[".content[_ngcontent-%COMP%]{height:calc(100vh - 96px)}"]}),t})();var o=s(433),S=s(7579);let f=(()=>{class t{constructor(){this.credential={name:"",username:"",email:"",password:""},this.credential$=new S.x}saveCredential(r){this.credential=r,this.credential$.next(r),console.log(this.credential)}get gCredential(){return this.credential}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=s(519),R=s(2340),x=s(8505);const F=R.N.base_url;let w=(()=>{class t{constructor(r){this.http=r}get token(){return sessionStorage.getItem("token")??""}saveLocalStorage(r){sessionStorage.clear(),sessionStorage.setItem("token",r)}logout(){sessionStorage.removeItem("token")}login(r){return this.http.post(`${F}/api/auth/login`,r).pipe((0,x.b)(i=>{this.saveLocalStorage(i.token)}))}register(r){return this.http.post(`${F}/api/auth/register`,r).pipe((0,x.b)(i=>{this.saveLocalStorage(i.token)}))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(C.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=s(8521),g=s(5593),c=s(1740),k=s(3425);const T=function(t){return{"p-error block":t}};let P=(()=>{class t{constructor(r,i,a,m,v,b){this.fb=r,this.registerService=i,this.router=a,this.formValidator=m,this.authService=v,this.toastService=b,this.loginForm=this.fb.group({username:["",[o.kI.required]],password:["",[o.kI.required]]}),this.observer={next:Z=>{console.log("[next]:",Z)},error:Z=>console.warn("[error]:",Z),complete:()=>console.warn("complete")}}ngOnInit(){sessionStorage.removeItem("token")}isValidField(r){return this.formValidator.isValidField(this.loginForm,r)}onLogin(){if(this.loginForm.invalid)return this.loginForm.markAllAsTouched(),void this.markDirty();console.log(this.loginForm.value),this.authService.login(this.loginForm.value).subscribe({next:()=>{this.loginForm.reset(),this.toastService.showToast("success","Service Message","Inicio de sesi\xf3n exitoso."),this.router.navigateByUrl("/book/home")},error:r=>{console.log("eerr"),this.loginForm.reset(),this.toastService.showToast("error","Service Message","Los datos ingresados no son v\xe1lidos.")}})}markDirty(){this.loginForm.get("username")?.markAsDirty(),this.loginForm.get("password")?.markAsDirty()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(f),e.Y36(l.F0),e.Y36(h.Q),e.Y36(w),e.Y36(A.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login-page"]],decls:31,vars:9,consts:[[1,"py-3","px-3","sm:px-6","xl:px-8","flex","flex-wrap","align-items-center","justify-content-center","relative"],[1,"w-12","pb-2"],[1,"text-center","text-900","text-3xl","font-medium"],[1,"w-6"],[1,"min-w-full","border-round","p-3","flex","align-items-center","justify-content-end"],["src","./assets/photo/r-1.jpeg","alt","Logo",1,"h-25rem"],[1,"w-6","pr-8","pl-6"],[1,"p-4","w-full"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-800","font-medium","mb-3"],["for","email1",1,"block","text-900","font-medium","mb-2"],["id","email1","type","text","pInputText","","formControlName","username",1,"w-full","mb-1"],["id","username",1,"hidden",3,"ngClass"],["for","password1",1,"block","text-900","font-medium","mb-2"],["id","password1","styleClass","w-full mb-1","formControlName","password",3,"toggleMask","feedback"],["id","password1",1,"hidden",3,"ngClass"],[1,"flex","align-items-center","justify-content-end","mb-3"],["routerLink","/auth/reset-pass",1,"font-medium","no-underline","ml-2","text-blue-500","text-right","cursor-pointer"],["pButton","","pRipple","","label","Ingresar","type","submit",1,"w-full"],[1,"text-center","mt-4","mb-2"],[1,"text-600","font-medium","line-height-3"],["routerLink","/auth/new-account",1,"font-medium","no-underline","ml-2","text-blue-500","cursor-pointer"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ingresar"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return i.onLogin()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Username"),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"small",12),e._uU(15,"Por favor, ingresa su username."),e.qZA()(),e.TgZ(16,"div",9)(17,"label",13),e._uU(18,"Contrase\xf1a"),e.qZA(),e._UZ(19,"p-password",14),e.TgZ(20,"small",15),e._uU(21,"Por favor, ingresa su contrase\xf1a."),e.qZA()(),e.TgZ(22,"div",16)(23,"a",17),e._uU(24,"Olvide mi contrase\xf1a"),e.qZA()(),e._UZ(25,"button",18),e.qZA(),e.TgZ(26,"div",19)(27,"span",20),e._uU(28,"\xbfA\xfan no tenes una cuenta?"),e.qZA(),e.TgZ(29,"a",21),e._uU(30,"Registrarse"),e.qZA()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",i.loginForm),e.xp6(5),e.Q6J("ngClass",e.VKq(5,T,i.isValidField("username"))),e.xp6(5),e.Q6J("toggleMask",!0)("feedback",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(7,T,i.isValidField("password"))))},dependencies:[p.mk,l.yS,g.Hq,c.o,k.ro,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["[_nghost-%COMP%]     .p-password input{width:100%}"]}),t})();const d=function(t){return{"p-error block":t}};let V=(()=>{class t{constructor(r,i,a,m){this.fb=r,this.registerService=i,this.router=a,this.formValidator=m,this.credential={name:"",username:"",email:"",password:""},this.registerForm=this.fb.group({name:["",[o.kI.required,o.kI.pattern(this.formValidator.firstNameAndLastNamePattern)]],username:["",[o.kI.required]],email:["",[o.kI.required,o.kI.pattern(this.formValidator.emailPattern)]],pwd:["",[o.kI.required,o.kI.minLength(8)]],pwd2:["",[o.kI.required,o.kI.minLength(8)]]},{validators:[this.formValidator.isFieldOneEqualFieldTwo("pwd","pwd2")]})}isValidField(r){return this.formValidator.isValidField(this.registerForm,r)}onRegister(){if(this.registerForm.invalid)return this.registerForm.markAllAsTouched(),void this.markDirty();console.log(this.registerForm.value);const{name:r,username:i,email:a,pwd:m}=this.registerForm.value;this.credential.name=r,this.credential.email=a,this.credential.password=m,this.credential.username=i,this.registerService.saveCredential(this.credential),this.router.navigateByUrl("auth/profile-register")}markDirty(){this.registerForm.get("name")?.markAsDirty(),this.registerForm.get("username")?.markAsDirty(),this.registerForm.get("email")?.markAsDirty(),this.registerForm.get("pwd")?.markAsDirty(),this.registerForm.get("pwd2")?.markAsDirty()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(f),e.Y36(l.F0),e.Y36(h.Q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register-page"]],decls:46,vars:19,consts:[[1,"py-3","px-3","sm:px-6","xl:px-8","flex","flex-wrap","align-items-center","justify-content-center","relative"],[1,"w-12","pb-2"],[1,"text-center","text-900","text-3xl","font-medium"],[1,"w-6"],[1,"min-w-full","border-round","p-3","flex","align-items-center","justify-content-end"],["src","./assets/photo/r-2.jpeg","alt","Logo",1,"h-25rem"],[1,"w-6","pr-8","pl-6"],[1,"p-4","w-full"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-800","font-medium","mb-3"],["for","fullName",1,"block","text-900","font-medium","mb-2"],["id","fullName","type","text","aria-describedby","fullName","pInputText","","formControlName","name",1,"w-12"],["id","fullName",1,"hidden",3,"ngClass"],["for","username",1,"block","text-900","font-medium","mb-2"],["id","username","type","text","aria-describedby","username","pInputText","","formControlName","username",1,"w-12"],["id","username",1,"hidden",3,"ngClass"],["for","email",1,"block","text-900","font-medium","mb-2"],["id","email","type","text","aria-describedby","email","pInputText","","formControlName","email",1,"w-12"],["id","email",1,"hidden",3,"ngClass"],["for","pwd",1,"block","text-900","font-medium","mb-2"],["id","pwd","styleClass","w-full","formControlName","pwd",3,"toggleMask","feedback"],["id","pwd",1,"hidden",3,"ngClass"],["for","pwd2",1,"block","text-900","font-medium","mb-2"],["id","pwd2","styleClass","w-full","formControlName","pwd2",3,"toggleMask"],["id","pwd2",1,"hidden",3,"ngClass"],["pButton","","pRipple","","label","Continuar","type","submit",1,"w-full"],[1,"text-center","mt-4","mb-2"],[1,"text-600","font-medium","line-height-3"],["routerLink","/auth/login",1,"font-medium","no-underline","ml-2","text-blue-500","cursor-pointer"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Registro"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return i.onRegister()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Nombre Completo"),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"small",12),e._uU(15,"Por favor, ingresa tu nombre y apellido completos."),e.qZA()(),e.TgZ(16,"div",9)(17,"label",13),e._uU(18,"Username"),e.qZA(),e._UZ(19,"input",14),e.TgZ(20,"small",15),e._uU(21,"Es necesario llenar este campo."),e.qZA()(),e.TgZ(22,"div",9)(23,"label",16),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"small",18),e._uU(27,"El correo electr\xf3nico ingresado no es v\xe1lido."),e.qZA()(),e.TgZ(28,"div",9)(29,"label",19),e._uU(30,"Contrase\xf1a"),e.qZA(),e._UZ(31,"p-password",20),e.TgZ(32,"small",21),e._uU(33,"La contrase\xf1a debe ser mayor de 8 caracteres."),e.qZA()(),e.TgZ(34,"div",9)(35,"label",22),e._uU(36,"Confirmar Contrase\xf1a"),e.qZA(),e._UZ(37,"p-password",23),e.TgZ(38,"small",24),e._uU(39,"Las contrase\xf1as deben de ser iguales."),e.qZA()(),e._UZ(40,"button",25),e.qZA(),e.TgZ(41,"div",26)(42,"span",27),e._uU(43,"\xbfYa tenes una cuenta?"),e.qZA(),e.TgZ(44,"a",28),e._uU(45,"Ingresar"),e.qZA()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",i.registerForm),e.xp6(5),e.Q6J("ngClass",e.VKq(9,d,i.isValidField("name"))),e.xp6(6),e.Q6J("ngClass",e.VKq(11,d,i.isValidField("username"))),e.xp6(6),e.Q6J("ngClass",e.VKq(13,d,i.isValidField("email"))),e.xp6(5),e.Q6J("toggleMask",!0)("feedback",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(15,d,i.isValidField("pwd"))),e.xp6(5),e.Q6J("toggleMask",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(17,d,i.isValidField("pwd2"))))},dependencies:[p.mk,l.yS,g.Hq,c.o,k.ro,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["[_nghost-%COMP%]     .p-password input{width:100%}"]}),t})(),I=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-pass-page"]],decls:12,vars:0,consts:[[1,"login-container"],[1,"p-4","shadow-2","border-round","w-full","lg:w-4"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium","line-height-3"],["for","email1",1,"block","text-900","font-medium","mb-2"],["id","email1","type","text","pInputText","",1,"w-full","mb-3"],["pButton","","pRipple","","label","Enviar enlace","routerLink","/cdv",1,"w-full"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," \xbfOlvido su contrase\xf1a? "),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Para recuperar su contrase\xf1a, ingrese su email y le enviaremos una nueva "),e.qZA()(),e.TgZ(7,"div")(8,"label",5),e._uU(9,"Correo Email"),e.qZA(),e._UZ(10,"input",6)(11,"button",7),e.qZA()()())},dependencies:[l.rH,g.Hq,c.o],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}"]}),t})();var L=s(2210),J=s(5722),_=s(3520),N=s(585);const u=function(t){return{"p-error block":t}},M=[{path:"",component:q,children:[{path:"login",component:P},{path:"new-account",component:V},{path:"profile-register",component:(()=>{class t{constructor(r,i,a,m,v,b){this.registerService=r,this.fb=i,this.formValidator=a,this.authService=m,this.router=v,this.toastService=b,this.pRegForm=this.fb.group({address:["",[o.kI.required,o.kI.minLength(8)]],birthDate:["",[o.kI.required]],phoneNumber:["",o.kI.required],gender:["",o.kI.required],country:["",o.kI.required],interest:["",o.kI.required]}),this.credential={name:"",username:"",email:"",password:""},this.genders=[{name:"HOMBRE"},{name:"MUJER"}],this.country=[{name:"Argentina"}],this.personal=[{name:"Playas"},{name:"Monta\xf1as"},{name:"Rios"},{name:"Eventos deportivos"},{name:"Eventos musicales"},{name:"turismo urbano"},{name:"Turismo nocturno"}]}ngOnInit(){this.registerService.credential$.subscribe(r=>{console.log(r)})}get gCredential(){return this.registerService.gCredential}isValidField(r){return this.formValidator.isValidField(this.pRegForm,r)}onSubmit(){if(this.pRegForm.invalid)return this.pRegForm.markAllAsTouched(),void this.markDirty();const r={...this.gCredential,...this.pRegForm.value,role:"ROLE_USER"};console.log(JSON.stringify(r)),this.authService.register(r).subscribe({next:()=>{this.pRegForm.reset(),this.toastService.showToast("success","Service Message","Registro exitoso."),this.router.navigateByUrl("/book/home")},error:i=>{this.toastService.showToast("error","Service Message","Los datos ingresados no son v\xe1lidos."),this.router.navigateByUrl("/auth/new-account")}})}markDirty(){this.pRegForm.get("address")?.markAsDirty(),this.pRegForm.get("birthDate")?.markAsDirty(),this.pRegForm.get("phoneNumber")?.markAsDirty(),this.pRegForm.get("gender")?.markAsDirty(),this.pRegForm.get("country")?.markAsDirty(),this.pRegForm.get("interest")?.markAsDirty()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f),e.Y36(o.qu),e.Y36(h.Q),e.Y36(w),e.Y36(l.F0),e.Y36(A.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-reg-page"]],decls:47,vars:22,consts:[[1,"pt-3","px-3","sm:px-6","xl:px-8","flex","flex-wrap","align-items-center","justify-content-center","relative"],[1,"w-12","pb-2"],[1,"text-center","text-900","text-3xl","font-medium"],[1,"w-6"],[1,"min-w-full","border-round","p-3","flex","align-items-center","justify-content-end"],["src","./assets/photo/r-1.jpeg","alt","Logo",1,"h-25rem"],[1,"w-6","pr-8","pl-6"],[1,"p-4","w-full"],["autocomplete","off",3,"formGroup","submit"],[1,"text-800","font-medium","mb-3"],["for","address",1,"block","text-900","font-medium","mb-2"],["id","address","type","text","aria-describedby","address","pInputText","","formControlName","address",1,"w-12"],["id","address",1,"hidden",3,"ngClass"],["for","birthdate",1,"block","text-900","font-medium","mb-2"],["id","birthdate","aria-describedby","birthdate","dateFormat","yy-mm-dd","inputId","dateformat","formControlName","birthDate","dataType","string","styleClass","w-full"],["id","birthdate",1,"hidden",3,"ngClass"],["for","phone",1,"block","text-900","font-medium","mb-2"],["id","phone","mask","99-9999-9999","placeholder","99-9999-9999","formControlName","phoneNumber","styleClass","w-full"],["id","phone",1,"hidden",3,"ngClass"],["for","gender",1,"block","text-900","font-medium","mb-2"],["placeholder","Select","optionLabel","name","optionValue","name","formControlName","gender","styleClass","w-full",3,"options"],["id","gender",1,"hidden",3,"ngClass"],["for","country",1,"block","text-900","font-medium","mb-2"],["placeholder","Select","optionLabel","name","formControlName","country","styleClass","w-full",3,"options"],["id","country",1,"hidden",3,"ngClass"],["for","interest",1,"block","text-900","font-medium","mb-2"],["defaultLabel","Select","optionLabel","name","selectedItemsLabel","{0} items selected","formControlName","interest","styleClass","w-full",3,"options"],["id","interest",1,"hidden",3,"ngClass"],["pButton","","pRipple","","label","Finalizar","type","submit",1,"w-full"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Completa algunos datos tuyos "),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8),e.NdJ("submit",function(){return i.onSubmit()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Direcci\xf3n"),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"small",12),e._uU(15,"Por favor, ingresa su direcci\xf3n."),e.qZA()(),e.TgZ(16,"div",9)(17,"label",13),e._uU(18,"Fecha Nacimiento"),e.qZA(),e._UZ(19,"p-calendar",14),e.TgZ(20,"small",15),e._uU(21,"Por favor, ingresa su fecha de nacimiento."),e.qZA()(),e.TgZ(22,"div",9)(23,"label",16),e._uU(24,"Numero de tel\xe9fono"),e.qZA(),e._UZ(25,"p-inputMask",17),e.TgZ(26,"small",18),e._uU(27,"Por favor, ingresa su numero de tel\xe9fono."),e.qZA()(),e.TgZ(28,"div",9)(29,"label",19),e._uU(30,"Sexo"),e.qZA(),e._UZ(31,"p-dropdown",20),e.TgZ(32,"small",21),e._uU(33,"Este campo es obligatorio."),e.qZA()(),e.TgZ(34,"div",9)(35,"label",22),e._uU(36,"Pa\xeds"),e.qZA(),e._UZ(37,"p-dropdown",23),e.TgZ(38,"small",24),e._uU(39,"Este campo es obligatorio."),e.qZA()(),e.TgZ(40,"div",9)(41,"label",25),e._uU(42,"Intereses"),e.qZA(),e._UZ(43,"p-multiSelect",26),e.TgZ(44,"small",27),e._uU(45,"Este campo es obligatorio."),e.qZA()(),e._UZ(46,"button",28),e.qZA()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",i.pRegForm),e.xp6(5),e.Q6J("ngClass",e.VKq(10,u,i.isValidField("address"))),e.xp6(6),e.Q6J("ngClass",e.VKq(12,u,i.isValidField("birthDate"))),e.xp6(6),e.Q6J("ngClass",e.VKq(14,u,i.isValidField("phoneNumber"))),e.xp6(5),e.Q6J("options",i.genders),e.xp6(1),e.Q6J("ngClass",e.VKq(16,u,i.isValidField("gender"))),e.xp6(5),e.Q6J("options",i.country),e.xp6(1),e.Q6J("ngClass",e.VKq(18,u,i.isValidField("country"))),e.xp6(5),e.Q6J("options",i.personal),e.xp6(1),e.Q6J("ngClass",e.VKq(20,u,i.isValidField("interest"))))},dependencies:[p.mk,g.Hq,c.o,L.Lt,J.NU,_.vy,N.f,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]     .p-password input{width:100%}"]}),t})()},{path:"reset-pass",component:I},{path:"**",redirectTo:"login"}]}];let D=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(M),l.Bz]}),t})();var Q=s(8788);let Y=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,D,Q.g,o.u5,C.JF,o.UX]}),t})()}}]);